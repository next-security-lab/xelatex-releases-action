\documentclass{article}

\usepackage[pangram]{blindtext}
\usepackage{minted}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{fontspec}
\usepackage{unicode-math}
\usepackage{tikz}
\usepackage{adjustbox}

\usetikzlibrary{lindenmayersystems}
\usetikzlibrary[shadings]


\setmainfont[Path = fonts/,
UprightFont = *-Regular,
BoldFont = *-Bold,
ItalicFont = *-Italic,
BoldItalicFont = *-BoldItalic
]{TexGyrePagella}

\setmonofont[Path = fonts/,
  UprightFont = *-Regular,
  BoldFont = *-Bold,
  ItalicFont = *-Italic,
  BoldItalicFont = *-BoldItalic
]{RobotoMono}

\setmathfont[Path = fonts/]{TexGyrePagella-Math}

\title{\LaTeX}
\author{JosÃ© Ignacio Escribano}

\begin{document}
  \maketitle

  \tableofcontents

  \newpage

  \section{\LaTeX}

  \LaTeX{} is a document preparation system for
  the \TeX{} typesetting program. It offers
  programmable desktop publishing features and
  extensive facilities for automating most
  aspects of typesetting and desktop publishing,
  including numbering and  cross-referencing,
  tables and figures, page layout,
  bibliographies, and much more. \LaTeX{} was
  originally written in 1984 by Leslie Lamport
  and has become the  dominant method for using
  \TeX; few people write in plain \TeX{} anymore.
  The current version is \LaTeXe.

  \begin{align}
    E_0 &= mc^2 \\
    E &= \frac{mc^2}{\sqrt{1-\frac{v^2}{c^2}}}
  \end{align}

  The most famous book to learn \TeX{} and \LaTeX{}
  are~\cite{texbook} and~\cite{latex}, respectively.

  \begin{figure}[htbp!]
    \centering
    \includegraphics[width=0.8\textwidth]{sky}
    \caption{Sky}
  \end{figure}

  \blindmathtrue
  \blinddocument
  \blindmathpaper

  \section{Code}

  \begin{minted}{python}
  import numpy as np

  def incmatrix(genl1,genl2):
      m = len(genl1)
      n = len(genl2)
      M = None #to become the incidence matrix
      VT = np.zeros((n*m,1), int)  #dummy variable

      #compute the bitwise xor matrix
      M1 = bitxormatrix(genl1)
      M2 = np.triu(bitxormatrix(genl2),1)

      for i in range(m-1):
          for j in range(i+1, m):
              [r,c] = np.where(M2 == M1[i,j])
              for k in range(len(r)):
                  VT[(i)*n + r[k]] = 1;
                  VT[(i)*n + c[k]] = 1;
                  VT[(j)*n + r[k]] = 1;
                  VT[(j)*n + c[k]] = 1;

                  if M is None:
                      M = np.copy(VT)
                  else:
                      M = np.concatenate((M, VT), 1)

                  VT = np.zeros((n*m,1), int)

      return M
  \end{minted}

  \section{Tikz diagram}

  \begin{figure}[htbp!]
    \centering
    \begin{adjustbox}{max width=\textwidth}
      \begin{tikzpicture}
        \pgfdeclarelindenmayersystem{Koch curve}{
          \rule{F -> F+F--F+F}
        }

        \draw[draw][l-system={Koch curve, step=4pt, angle=60, axiom=F++, order=5}]
        lindenmayer system;
      \end{tikzpicture}
    \end{adjustbox}
    \caption{Koch curve~\cite{koch}}
  \end{figure}

  \bibliographystyle{unsrt}
  \bibliography{bibliography}
\end{document}
